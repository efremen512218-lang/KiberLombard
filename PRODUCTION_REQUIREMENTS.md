# –¢–ó: –ö–∏–±–µ—Ä–õ–æ–º–±–∞—Ä–¥ - –ë–æ–µ–≤–∞—è –≤–µ—Ä—Å–∏—è

## –¶–µ–ª—å
–î–æ–≤–µ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å –¥–æ —É—Ä–æ–≤–Ω—è production —Å live-—Ü–µ–Ω–∞–º–∏, –ø–æ–ª–Ω—ã–º KYC, –≥–∏–±–∫–∏–º –≤—ã–±–æ—Ä–æ–º —Å—Ä–æ–∫–∞ –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ç—É—Ä–æ–º –¥–ª—è —Å—É–¥–∞.

## –ü—Ä–∏–Ω—Ü–∏–ø—ã
- –¢–æ–ª—å–∫–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞, –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–≥–ª—É—à–µ–∫
- –†–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã —Å –¥–≤—É—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π KYC –¥–ª—è –≤—Å–µ—Ö
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å—É–¥–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

---

## 1. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ü–µ–Ω –∏ –ø—Ä–∏—ë–º –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### 1.1 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ live-—Ü–µ–Ω
**–î–≤–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
- **Lis-Skins** (instant sell) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- **market.csgo** (instant/—Ä—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞) - —Ä–µ–∑–µ—Ä–≤

### 1.2 –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –ø—Ä–µ–¥–º–µ—Ç–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–∏–Ω–∞]             ‚îÇ
‚îÇ AK-47 | Redline (FT)            ‚îÇ
‚îÇ –†–µ–¥–∫–æ—Å—Ç—å: Classified            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Steam Market: 3,500 ‚ÇΩ           ‚îÇ
‚îÇ Lis-Skins: 2,800 ‚ÇΩ              ‚îÇ
‚îÇ market.csgo: 2,900 ‚ÇΩ            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üí∞ –í—ã–¥–∞–¥–∏–º: 1,820 ‚ÇΩ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.3 –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏—ë–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
**–ù–ï –ø—Ä–∏–Ω–∏–º–∞–µ–º –µ—Å–ª–∏:**
- –ù–µ—Ç instant-—Ü–µ–Ω—ã –Ω–∞ Lis-Skins (–Ω–µ–ª—å–∑—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–æ–¥–∞—Ç—å)
- `min(lis_price, market_csgo_price) < 20 ‚ÇΩ`

**–°—Ç–∞—Ç—É—Å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–æ]         ‚îÇ
‚îÇ P2000 | Grassland               ‚îÇ
‚îÇ ‚ùå –ù–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º                 ‚îÇ
‚îÇ –ü—Ä–∏—á–∏–Ω–∞: –ù–µ—Ç –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π       ‚îÇ
‚îÇ –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ —Ä—ã–Ω–∫–µ                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.4 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ —Å–¥–µ–ª–∫–µ
{
    "steam_price": 3500.0,
    "lis_price": 2800.0,
    "market_csgo_price": 2900.0,
    "instant_price_used": 2800.0,  # min(lis, market)
    "instant_source": "lis-skins",  # –∏–ª–∏ "market.csgo"
    "loan_price": 1820.0,
    "price_timestamp": "2025-12-06T14:30:00Z"
}
```

---

## 2. –§–æ—Ä–º—É–ª–∞ –≤—ã–¥–∞—á–∏ –∏ –≤—ã–∫—É–ø–∞

### 2.1 –†–∞—Å—á—ë—Ç instant-—Ü–µ–Ω—ã
```python
instant_price = min(lis_price, market_csgo_price)
```

### 2.2 –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–¥–∞—á–∏ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π)

```python
# backend/config.py
LOAN_PERCENTAGES = {
    "ranges": [
        {"max": 500, "percent": 0.60},      # –¥–æ 500‚ÇΩ ‚Üí 60%
        {"max": 5000, "percent": 0.65},     # 500-5000‚ÇΩ ‚Üí 65%
        {"max": float('inf'), "percent": 0.70}  # 5000+‚ÇΩ ‚Üí 70%
    ]
}

def get_loan_percent(instant_price: float) -> float:
    for range_config in LOAN_PERCENTAGES["ranges"]:
        if instant_price <= range_config["max"]:
            return range_config["percent"]
    return 0.70  # fallback
```

### 2.3 –°—Ä–æ–∫ –≤—ã–∫—É–ø–∞ (7-30 –¥–Ω–µ–π)
**UI –∫–æ–Ω—Ç—Ä–æ–ª:** –°–ª–∞–π–¥–µ—Ä —Å —à–∞–≥–æ–º 1 –¥–µ–Ω—å

```python
# backend/config.py
BUYBACK_TERMS = {
    7: {"interest": 0.10, "premium": 0.05},   # 10% + 5% –ø—Ä–µ–º–∏—è
    14: {"interest": 0.15, "premium": 0.07},  # 15% + 7% –ø—Ä–µ–º–∏—è
    21: {"interest": 0.20, "premium": 0.09},  # 20% + 9% –ø—Ä–µ–º–∏—è
    30: {"interest": 0.25, "premium": 0.10}   # 25% + 10% –ø—Ä–µ–º–∏—è
}

# –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –¥–ª—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
def get_term_config(days: int) -> dict:
    # –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –±–ª–∏–∂–∞–π—à–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
    pass
```

### 2.4 –§–æ—Ä–º—É–ª–∞ –≤—ã–∫—É–ø–∞
```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
loan_price = instant_price * get_loan_percent(instant_price)

# –û–±—â–∞—è —Å—É–º–º–∞ –≤—ã–¥–∞—á–∏
loan_total = sum(loan_price for item in selected_items)

# –í—ã–∫—É–ø
term_config = get_term_config(selected_days)
base_buyback = loan_total * (1 + term_config["interest"])
buyback_price = base_buyback * (1 + term_config["premium"])
```

### 2.5 –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –£—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–∫–∏                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –†—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞: 15,400 ‚ÇΩ                 ‚îÇ
‚îÇ üí∞ –¢—ã –ø–æ–ª—É—á–∏—à—å: 10,010 ‚ÇΩ                ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –°—Ä–æ–∫ –≤—ã–∫—É–ø–∞: [====‚óè====] 14 –¥–Ω–µ–π       ‚îÇ
‚îÇ              7–¥        30–¥              ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üîÑ –í—ã–∫—É–ø –¥–æ 20.12.2025: 12,512 ‚ÇΩ        ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á—ë—Ç–∞:                         ‚îÇ
‚îÇ ‚Ä¢ –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–¥–∞—á–∏: 65%                   ‚îÇ
‚îÇ ‚Ä¢ –ü–µ—Ä–µ–ø–ª–∞—Ç–∞ –∑–∞ 14 –¥–Ω–µ–π: 15%             ‚îÇ
‚îÇ ‚Ä¢ –ü—Ä–µ–º–∏—è –æ–ø—Ü–∏–æ–Ω–∞: 7%                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 3. –≠–∫—Ä–∞–Ω –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ UX

### 3.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç–∫—Ä–∞–Ω–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ê–≤–∞—Ç–∞—Ä] Nickname                    [–û–±–Ω–æ–≤–∏—Ç—å] [‚öôÔ∏è] ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üì¶ –í—Å–µ–≥–æ: 50    üíé Steam: 125,400‚ÇΩ                   ‚îÇ
‚îÇ ‚ö° Instant: 98,200‚ÇΩ    üí∞ –ö –≤—ã–¥–∞—á–µ: 63,830‚ÇΩ          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–ü–æ–∏—Å–∫...] [–¶–µ–Ω–∞ ‚ñº] [–†–µ–¥–∫–æ—Å—Ç—å ‚ñº] [–í—Å–µ —Ä–µ–¥–∫–æ—Å—Ç–∏]     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–ö–∞—Ä—Ç–æ—á–∫–∞ 1] [–ö–∞—Ä—Ç–æ—á–∫–∞ 2] [–ö–∞—Ä—Ç–æ—á–∫–∞ 3] ...           ‚îÇ
‚îÇ [–ö–∞—Ä—Ç–æ—á–∫–∞ 4] [–ö–∞—Ä—Ç–æ—á–∫–∞ 5] [–ö–∞—Ä—Ç–æ—á–∫–∞ 6] ...           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã (–±–µ–∑ –∑–∞–≥–ª—É—à–µ–∫)
- Live-–ø–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –≤—ã–±–æ—Ä–µ/–æ—Ç–º–µ–Ω–µ
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω
- –Ø–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### 3.3 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Steam
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω              ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:                   ‚îÇ
‚îÇ ‚Ä¢ –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å                  ‚îÇ
‚îÇ ‚Ä¢ Trade-–±–∞–Ω                          ‚îÇ
‚îÇ ‚Ä¢ –û—à–∏–±–∫–∞ Steam API                   ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ –ß—Ç–æ –¥–µ–ª–∞—Ç—å:                          ‚îÇ
‚îÇ 1. –°–¥–µ–ª–∞–π –ø—Ä–æ—Ñ–∏–ª—å –ø—É–±–ª–∏—á–Ω—ã–º          ‚îÇ
‚îÇ 2. –ü—Ä–æ–≤–µ—Ä—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Steam         ‚îÇ
‚îÇ 3. –ü–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç            ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ [–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É]                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 4. –ú–∞—Å—Ç–µ—Ä —Å–¥–µ–ª–∫–∏: –®–∞–≥ 1 - –£—Å–ª–æ–≤–∏—è

### 4.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —ç–∫—Ä–∞–Ω–∞

1. **–°–≤–æ–¥–∫–∞ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º** (—Å–ø–∏—Å–æ–∫ —Å —Ü–µ–Ω–∞–º–∏)
2. **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—É–º–º—ã** (—Ä—ã–Ω–æ—á–Ω–∞—è ‚Üí –≤—ã–¥–∞—á–∞ ‚Üí –≤—ã–∫—É–ø)
3. **–°–ª–∞–π–¥–µ—Ä —Å—Ä–æ–∫–∞** (7-30 –¥–Ω–µ–π —Å live-–ø–µ—Ä–µ—Å—á—ë—Ç–æ–º)
4. **–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è)
5. **–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á—ë—Ç–∞** (—Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫)

### 4.2 –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:
- –°—É–º–º–∞ –≤—ã–∫—É–ø–∞
- –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- –ü—Ä–æ—Ü–µ–Ω—Ç—ã –≤ –¥–µ—Ç–∞–ª—è—Ö
- –¢–µ–∫—Å—Ç –≤ –¥–æ–≥–æ–≤–æ—Ä–Ω—ã—Ö –±–ª–æ–∫–∞—Ö

### 4.3 –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ú–∏–Ω–∏–º—É–º 1 –ø—Ä–µ–¥–º–µ—Ç
- –í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "–ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–º–∏"
- –°—Ä–æ–∫ –æ—Ç 7 –¥–æ 30 –¥–Ω–µ–π

---

## 5. –ú–∞—Å—Ç–µ—Ä —Å–¥–µ–ª–∫–∏: –®–∞–≥ 2 - KYC (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö)

### 5.1 –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞

**–§–ª–æ—É:**
```
1. –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ (+7XXXXXXXXXX)
   ‚Üì
2. [–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥] ‚Üí SMS —á–µ—Ä–µ–∑ —à–ª—é–∑
   ‚Üì
3. –í–≤–æ–¥ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞
   ‚Üì
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ (TTL 5 –º–∏–Ω—É—Ç)
   ‚Üì
5. ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# backend/services/sms_service.py
class SMSService:
    @staticmethod
    async def send_verification_code(phone: str) -> str:
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å SMS —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–π —à–ª—é–∑"""
        code = generate_6_digit_code()
        
        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMS.ru / SMSC.ru / –¥—Ä—É–≥–æ–π
        response = await sms_gateway.send(
            phone=phone,
            text=f"–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ö–∏–±–µ—Ä–õ–æ–º–±–∞—Ä–¥: {code}"
        )
        
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Redis —Å TTL
        await redis.setex(
            f"sms_code:{phone}",
            300,  # 5 –º–∏–Ω—É—Ç
            hash_code(code)
        )
        
        # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å
        log_sms_sent(phone, response.message_id)
        
        return code  # –¢–æ–ª—å–∫–æ –¥–ª—è dev!
    
    @staticmethod
    async def verify_code(phone: str, code: str) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥"""
        stored = await redis.get(f"sms_code:{phone}")
        if not stored:
            return False
        
        is_valid = check_hash(code, stored)
        
        if is_valid:
            await redis.delete(f"sms_code:{phone}")
            log_sms_verified(phone)
        
        return is_valid
```

### 5.2 –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞

**–ü–æ–ª—è –≤–≤–æ–¥–∞:**
- –§–ò–û (3 –ø–æ–ª—è)
- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- –°–µ—Ä–∏—è –∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞
- –ö–µ–º –≤—ã–¥–∞–Ω
- –î–∞—Ç–∞ –≤—ã–¥–∞—á–∏
- –ö–æ–¥ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
- –§–æ—Ç–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ (–∑–∞–≥—Ä—É–∑–∫–∞)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ KYC:**
```python
# backend/services/kyc_service.py
class KYCService:
    @staticmethod
    async def submit_verification(user_id: int, data: dict) -> str:
        """
        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
        
        Returns:
            verification_id - ID –∑–∞–ø—Ä–æ—Å–∞
        """
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
        verification = KYCVerification(
            user_id=user_id,
            full_name=data["full_name"],
            birth_date=data["birth_date"],
            passport_series=data["series"],
            passport_number=data["number"],
            issued_by=data["issued_by"],
            issue_date=data["issue_date"],
            department_code=data["department_code"],
            photo_url=data["photo_url"],
            status="pending",
            created_at=datetime.now()
        )
        db.add(verification)
        db.commit()
        
        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ KYC-–ø—Ä–æ–≤–∞–π–¥–µ—Ä (async)
        # –ü–æ–∫–∞ - —Ñ–µ–π–∫–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
        asyncio.create_task(
            fake_kyc_check(verification.id)
        )
        
        return verification.id
    
    @staticmethod
    async def get_status(verification_id: str) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏"""
        verification = db.query(KYCVerification).get(verification_id)
        return verification.status  # pending / passed / failed
```

**UI —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```
pending:  ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–æ–±—ã—á–Ω–æ 1-5 –º–∏–Ω—É—Ç)
passed:   ‚úÖ –ü–∞—Å–ø–æ—Ä—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
failed:   ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞ (–ø—Ä–∏—á–∏–Ω–∞)
```

### 5.3 –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
–ë–µ–∑ `phone_verified=True` –∏ `kyc_status=passed` –∫–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞.

---

## 6. –ú–∞—Å—Ç–µ—Ä —Å–¥–µ–ª–∫–∏: –®–∞–≥ 3 - –ü–æ–¥–ø–∏—Å—å –∏ –¥–æ–≥–æ–≤–æ—Ä

### 6.1 –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å
**–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –≤ –¥–æ–≥–æ–≤–æ—Ä–µ:**
> "–î–æ–≥–æ–≤–æ—Ä –≤—ã–∫—É–ø–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤ –Ω–∞ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã 
> —Å –æ–ø—Ü–∏–æ–Ω–æ–º –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∫—É–ø"

**–ö–ª—é—á–µ–≤—ã–µ –ø—É–Ω–∫—Ç—ã:**
- –ü–µ—Ä–µ—á–µ–Ω—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å —Ü–µ–Ω–∞–º–∏
- –°—É–º–º–∞ –≤—ã–¥–∞—á–∏
- –°—Ä–æ–∫ –æ–ø—Ü–∏–æ–Ω–∞ (N –¥–Ω–µ–π, –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç—ã)
- –§–æ—Ä–º—É–ª–∞ –∏ —Å—É–º–º–∞ –≤—ã–∫—É–ø–∞
- –†–∏—Å–∫–∏ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª Steam)
- –ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∞–≤–∞ –≤—ã–∫—É–ø–∞ –ø–æ—Å–ª–µ –¥–∞—Ç—ã

### 6.2 –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ SMS


**–§–ª–æ—É –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è:**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∏—Ç–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä
   ‚Üì
2. –°—Ç–∞–≤–∏—Ç –≥–∞–ª–æ—á–∫—É "–°–æ–≥–ª–∞—Å–µ–Ω —Å —É—Å–ª–æ–≤–∏—è–º–∏"
   ‚Üì
3. [–ü–æ–¥–ø–∏—Å–∞—Ç—å] ‚Üí –û—Ç–ø—Ä–∞–≤–∫–∞ SMS —Å –∫–æ–¥–æ–º
   ‚Üì
4. –í–≤–æ–¥ –∫–æ–¥–∞ –ø–æ–¥–ø–∏—Å–∏
   ‚Üì
5. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–∏
   ‚Üì
6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –¥–æ–≥–æ–≤–æ—Ä–∞
   ‚Üì
7. ‚úÖ –°–¥–µ–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∞
```

**–ó–∞–ø–∏—Å—å –æ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–∏:**
```python
# backend/models.py
class DealSignature(Base):
    __tablename__ = "deal_signatures"
    
    id = Column(Integer, primary_key=True)
    deal_id = Column(Integer, ForeignKey("deals.id"))
    
    # –î–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞
    user_id = Column(Integer, ForeignKey("users.id"))
    phone = Column(String)
    
    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–ø–∏—Å–∏
    signature_code_hash = Column(String)  # –•—ç—à SMS-–∫–æ–¥–∞
    signature_timestamp = Column(DateTime)
    
    # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    ip_address = Column(String)
    user_agent = Column(String)
    
    # –î–æ–≥–æ–≤–æ—Ä
    contract_hash = Column(String)  # SHA-256 —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
    contract_version = Column(String)  # v1.0
    contract_pdf_url = Column(String)
    
    # –õ–æ–≥–∏ –¥–ª—è —Å—É–¥–∞
    kyc_verification_id = Column(String)
    terms_accepted_at = Column(DateTime)
```

### 6.3 –õ–æ–≥–∏ –¥–ª—è —Å—É–¥–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

**–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å:**
```python
# backend/models.py
class AuditLog(Base):
    __tablename__ = "audit_logs"
    
    id = Column(Integer, primary_key=True)
    deal_id = Column(Integer, ForeignKey("deals.id"))
    user_id = Column(Integer, ForeignKey("users.id"))
    
    action = Column(String)  # "deal_created", "contract_signed", etc.
    timestamp = Column(DateTime)
    
    # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    ip_address = Column(String)
    user_agent = Column(String)
    session_id = Column(String)
    
    # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–µ–π—Å—Ç–≤–∏—è
    details = Column(JSON)  # –í—Å–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**
```json
{
  "action": "contract_signed",
  "timestamp": "2025-12-06T15:30:00Z",
  "ip_address": "192.168.1.100",
  "user_agent": "Mozilla/5.0...",
  "details": {
    "deal_id": 123,
    "phone": "+79001234567",
    "kyc_verification_id": "kyc_abc123",
    "contract_hash": "sha256:...",
    "contract_version": "v1.0",
    "terms_version": "2025-12-01",
    "items_count": 5,
    "loan_amount": 10010.0,
    "buyback_amount": 12512.0,
    "term_days": 14,
    "expiry_date": "2025-12-20"
  }
}
```

### 6.4 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ PDF:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –î–û–ì–û–í–û–† ‚Ññ 123                           ‚îÇ
‚îÇ –≤—ã–∫—É–ø–∞ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤ –Ω–∞ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—ã–µ   ‚îÇ
‚îÇ –ø—Ä–µ–¥–º–µ—Ç—ã —Å –æ–ø—Ü–∏–æ–Ω–æ–º –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∫—É–ø   ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –æ—Ç 06.12.2025                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. –ü–†–ï–î–ú–ï–¢ –î–û–ì–û–í–û–†–ê                     ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –ü–µ—Ä–µ—á–µ–Ω—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤:                     ‚îÇ
‚îÇ 1. AK-47 | Redline (FT)                 ‚îÇ
‚îÇ    Steam: 3,500‚ÇΩ | Instant: 2,800‚ÇΩ     ‚îÇ
‚îÇ    –í—ã–¥–∞—á–∞: 1,820‚ÇΩ                       ‚îÇ
‚îÇ ...                                     ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –ò—Ç–æ–≥–æ –≤—ã–¥–∞—á–∞: 10,010‚ÇΩ                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 2. –£–°–õ–û–í–ò–Ø –í–´–ö–£–ü–ê                       ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –°—Ä–æ–∫ –æ–ø—Ü–∏–æ–Ω–∞: 14 –¥–Ω–µ–π                   ‚îÇ
‚îÇ –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 20.12.2025 23:59 –ú–°–ö    ‚îÇ
‚îÇ –°—É–º–º–∞ –≤—ã–∫—É–ø–∞: 12,512‚ÇΩ                   ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞:                        ‚îÇ
‚îÇ –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞: 10,010‚ÇΩ                  ‚îÇ
‚îÇ –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞ 14 –¥–Ω–µ–π: 15% = 1,502‚ÇΩ       ‚îÇ
‚îÇ –ü—Ä–µ–º–∏—è –æ–ø—Ü–∏–æ–Ω–∞: 7% = 1,000‚ÇΩ            ‚îÇ
‚îÇ –ò—Ç–æ–≥–æ: 12,512‚ÇΩ                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 3. –†–ò–°–ö–ò –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø                  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ ‚Ä¢ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã Steam/Valve     ‚îÇ
‚îÇ ‚Ä¢ –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã            ‚îÇ
‚îÇ ‚Ä¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –ø–æ            ‚îÇ
‚îÇ   —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤                 ‚îÇ
‚îÇ ‚Ä¢ –ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∞–≤–∞ –≤—ã–∫—É–ø–∞ –ø–æ—Å–ª–µ –¥–∞—Ç—ã   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 4. –ü–û–î–ü–ò–°–ò                              ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –ü–æ–∫—É–ø–∞—Ç–µ–ª—å: –û–û–û "–ö–∏–±–µ—Ä–õ–æ–º–±–∞—Ä–¥"          ‚îÇ
‚îÇ –ü—Ä–æ–¥–∞–≤–µ—Ü: [–§–ò–û –∏–∑ –ø–∞—Å–ø–æ—Ä—Ç–∞]             ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å:                    ‚îÇ
‚îÇ –¢–µ–ª–µ—Ñ–æ–Ω: +7900*****67                   ‚îÇ
‚îÇ –î–∞—Ç–∞: 06.12.2025 15:30:00 –ú–°–ö           ‚îÇ
‚îÇ IP: 192.168.***.***                     ‚îÇ
‚îÇ –•—ç—à –¥–æ–≥–æ–≤–æ—Ä–∞: sha256:abc123...          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# backend/services/contract_service.py
class ContractService:
    @staticmethod
    def generate_contract_pdf(deal: Deal, user: User) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF –¥–æ–≥–æ–≤–æ—Ä–∞
        
        Returns:
            path - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
        """
        # –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
        context = {
            "deal_id": deal.id,
            "date": deal.created_at.strftime("%d.%m.%Y"),
            "items": deal.items_snapshot,
            "loan_amount": deal.loan_amount,
            "buyback_amount": deal.buyback_price,
            "term_days": deal.option_days,
            "expiry_date": deal.option_expiry.strftime("%d.%m.%Y %H:%M –ú–°–ö"),
            "user_full_name": user.full_name,
            "user_phone_masked": mask_phone(user.phone),
            "signature_timestamp": deal.signature_timestamp,
            "signature_ip_masked": mask_ip(deal.signature_ip),
            "contract_hash": deal.contract_hash
        }
        
        # –†–µ–Ω–¥–µ—Ä–∏—Ç—å HTML –∏–∑ —à–∞–±–ª–æ–Ω–∞
        html = render_template("contract.html", **context)
        
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ PDF (weasyprint / pdfkit)
        pdf_path = f"contracts/deal_{deal.id}.pdf"
        generate_pdf(html, pdf_path)
        
        return pdf_path
```

---

## 7. –í—ã–ø–ª–∞—Ç—ã –∏ —Ç—Ä–µ–π–¥

### 7.1 Trade —Å –±–æ—Ç–æ–º

**–°—Ç–∞—Ç—É—Å—ã —Ç—Ä–µ–π–¥–∞:**
```python
class TradeStatus(str, Enum):
    CREATED = "created"
    SENT = "sent"
    ACCEPTED = "accepted"
    DECLINED = "declined"
    EXPIRED = "expired"
    CANCELLED = "cancelled"
```

**–§–ª–æ—É:**
```
1. –°–¥–µ–ª–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∞
   ‚Üì
2. –°–æ–∑–¥–∞–Ω–∏–µ trade offer —á–µ—Ä–µ–∑ Steam Bot API
   ‚Üì
3. –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   ‚Üì
4. –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–∏—è (polling —Å—Ç–∞—Ç—É—Å–∞)
   ‚Üì
5. –¢—Ä–µ–π–¥ –ø—Ä–∏–Ω—è—Ç ‚Üí —Å—Ç–∞—Ç—É—Å —Å–¥–µ–ª–∫–∏ = "trade_completed"
```

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
# backend/models.py
class SteamTrade(Base):
    __tablename__ = "steam_trades"
    
    id = Column(Integer, primary_key=True)
    deal_id = Column(Integer, ForeignKey("deals.id"))
    
    trade_offer_id = Column(String)
    trade_offer_url = Column(String)
    
    status = Column(Enum(TradeStatus))
    is_incoming = Column(Boolean)  # True = –æ—Ç —é–∑–µ—Ä–∞ –∫ –±–æ—Ç—É
    
    items_json = Column(JSON)
    
    created_at = Column(DateTime)
    sent_at = Column(DateTime)
    completed_at = Column(DateTime)
    
    # –õ–æ–≥–∏ –æ—Ç–≤–µ—Ç–æ–≤ Steam
    steam_response = Column(JSON)
```

### 7.2 –í—ã–ø–ª–∞—Ç—ã –ø–æ –°–ë–ü


**UI –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–Ω–µ–≥              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚óè –°–ë–ü (–°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π)    ‚îÇ
‚îÇ   –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞ 1-5 –º–∏–Ω—É—Ç            ‚îÇ
‚îÇ   –ö–æ–º–∏—Å—Å–∏—è: 0‚ÇΩ                      ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚óã –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ (—Å–∫–æ—Ä–æ)          ‚îÇ
‚îÇ ‚óã –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∫–æ—à–µ–ª—ë–∫ (—Å–∫–æ—Ä–æ)       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –°—É–º–º–∞ –∫ –≤—ã–ø–ª–∞—Ç–µ: 10,010 ‚ÇΩ           ‚îÇ
‚îÇ –ö–æ–º–∏—Å—Å–∏—è: 0 ‚ÇΩ                       ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÇ
‚îÇ –ò—Ç–æ–≥–æ –ø–æ–ª—É—á–∏—à—å: 10,010 ‚ÇΩ            ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ [–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É]               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º:**
```python
# backend/services/sbp_service.py
class SBPService:
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –°–ë–ü —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞"""
    
    @staticmethod
    async def create_payout(
        phone: str,
        amount: float,
        deal_id: int
    ) -> str:
        """
        –°–æ–∑–¥–∞—Ç—å –≤—ã–ø–ª–∞—Ç—É
        
        Returns:
            payout_id
        """
        # –ó–∞–ø—Ä–æ—Å –∫ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
        response = await sbp_provider.create_payout({
            "phone": phone,
            "amount": amount,
            "description": f"–í—ã–ø–ª–∞—Ç–∞ –ø–æ —Å–¥–µ–ª–∫–µ #{deal_id}",
            "callback_url": f"{API_URL}/webhooks/sbp"
        })
        
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
        payout = SBPPayout(
            deal_id=deal_id,
            payout_id=response["payout_id"],
            phone=phone,
            amount=amount,
            status="pending",
            created_at=datetime.now(),
            provider_response=response
        )
        db.add(payout)
        db.commit()
        
        return payout.payout_id
    
    @staticmethod
    async def check_status(payout_id: str) -> str:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—ã–ø–ª–∞—Ç—ã"""
        payout = db.query(SBPPayout).filter_by(
            payout_id=payout_id
        ).first()
        
        # –ó–∞–ø—Ä–æ—Å–∏—Ç—å —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
        response = await sbp_provider.get_status(payout_id)
        
        # –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
        payout.status = response["status"]
        payout.updated_at = datetime.now()
        db.commit()
        
        return payout.status
```

**–°—Ç–∞—Ç—É—Å—ã –≤—ã–ø–ª–∞—Ç—ã:**
- `pending` - —Å–æ–∑–¥–∞–Ω–∞, –æ–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `processing` - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- `completed` - —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–ª–∞—á–µ–Ω–∞
- `failed` - –æ—à–∏–±–∫–∞ (—Å –ø—Ä–∏—á–∏–Ω–æ–π)

### 7.3 –°—Ç–∞—Ç—É—Å—ã —Å–¥–µ–ª–∫–∏ (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)

```python
class DealStatus(str, Enum):
    CREATED = "created"              # –°–æ–∑–¥–∞–Ω–∞, –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
    KYC_PENDING = "kyc_pending"      # –û–∂–∏–¥–∞–Ω–∏–µ KYC
    READY_TO_SIGN = "ready_to_sign"  # –ì–æ—Ç–æ–≤–∞ –∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—é
    SIGNED = "signed"                # –ü–æ–¥–ø–∏—Å–∞–Ω–∞
    TRADE_PENDING = "trade_pending"  # –û–∂–∏–¥–∞–Ω–∏–µ —Ç—Ä–µ–π–¥–∞
    TRADE_COMPLETED = "trade_completed"  # –¢—Ä–µ–π–¥ –ø—Ä–∏–Ω—è—Ç
    PAYOUT_PENDING = "payout_pending"    # –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–ø–ª–∞—Ç—ã
    ACTIVE = "active"                # –ê–∫—Ç–∏–≤–Ω–∞ (–¥–µ–Ω—å–≥–∏ –≤—ã–ø–ª–∞—á–µ–Ω—ã)
    BUYBACK_INITIATED = "buyback_initiated"  # –ù–∞—á–∞—Ç –≤—ã–∫—É–ø
    BUYBACK_PAID = "buyback_paid"    # –í—ã–∫—É–ø –æ–ø–ª–∞—á–µ–Ω
    BUYBACK_COMPLETED = "buyback_completed"  # –í—ã–∫—É–ø –∑–∞–≤–µ—Ä—à—ë–Ω
    EXPIRED = "expired"              # –°—Ä–æ–∫ –∏—Å—Ç—ë–∫
    CANCELLED = "cancelled"          # –û—Ç–º–µ–Ω–µ–Ω–∞
```

**–ü–µ—Ä–µ—Ö–æ–¥—ã:**
```
created ‚Üí kyc_pending ‚Üí ready_to_sign ‚Üí signed ‚Üí 
trade_pending ‚Üí trade_completed ‚Üí payout_pending ‚Üí 
active ‚Üí [buyback_initiated ‚Üí buyback_paid ‚Üí buyback_completed]
       ‚Üí [expired]
```

---

## 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (must-have)

### 8.1 API —Ü–µ–Ω (Lis-Skins / market.csgo)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è fallback:**
```python
async def get_prices(items: List[str]) -> Dict[str, PriceData]:
    """–ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—ã —Å fallback"""
    
    # –ü–æ–ø—ã—Ç–∫–∞ 1: Lis-Skins
    lis_prices = await fetch_lis_prices(items)
    
    # –ü–æ–ø—ã—Ç–∫–∞ 2: market.csgo
    market_prices = await fetch_market_prices(items)
    
    # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
    result = {}
    for item in items:
        lis = lis_prices.get(item, 0)
        market = market_prices.get(item, 0)
        
        if lis == 0 and market == 0:
            # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à
            cached = get_cached_price(item)
            if cached and not is_stale(cached):
                result[item] = cached
            else:
                result[item] = None  # –ù–µ—Ç —Ü–µ–Ω—ã
        else:
            result[item] = PriceData(
                lis_price=lis,
                market_price=market,
                instant_price=min(lis, market) if lis > 0 and market > 0 else max(lis, market),
                timestamp=datetime.now()
            )
    
    return result
```

**UI –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è –¶–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã         ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ     ‚îÇ
‚îÇ —Ü–µ–Ω—ã —Å —Ä—ã–Ω–∫–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑     ‚îÇ
‚îÇ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.                    ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 14:25         ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ [–ü–æ–≤—Ç–æ—Ä–∏—Ç—å] [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–µ—Å—Ç–∏:**
```python
MAX_PRICE_AGE = timedelta(hours=1)

def is_price_stale(price_data: PriceData) -> bool:
    return datetime.now() - price_data.timestamp > MAX_PRICE_AGE
```

### 8.2 Steam / –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫:**
- 403 Forbidden ‚Üí –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
- 401 Unauthorized ‚Üí –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- 429 Too Many Requests ‚Üí Rate limit
- Trade ban ‚Üí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ç—Ä–µ–π–¥

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
```python
async def get_inventory(steam_id: str) -> InventoryResult:
    try:
        response = await steam_api.get_inventory(steam_id)
        
        if response.status == 403:
            return InventoryResult(
                success=False,
                error_code="PRIVATE_PROFILE",
                message="–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π. –°–¥–µ–ª–∞–π –ø—Ä–æ—Ñ–∏–ª—å –ø—É–±–ª–∏—á–Ω—ã–º.",
                instructions=[
                    "–û—Ç–∫—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Steam",
                    "–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å ‚Üí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å ‚Üí –ü—É–±–ª–∏—á–Ω—ã–π",
                    "–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É"
                ]
            )
        
        # ... –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏
        
    except Exception as e:
        log_error("inventory_fetch_failed", steam_id, str(e))
        return InventoryResult(
            success=False,
            error_code="UNKNOWN_ERROR",
            message="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å"
        )
```

### 8.3 SMS –∏ KYC

**SMS –æ—à–∏–±–∫–∏:**
```python
class SMSError(Exception):
    """–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS"""
    
    def __init__(self, code: str, message: str):
        self.code = code
        self.message = message

# –ö–æ–¥—ã –æ—à–∏–±–æ–∫
SMS_ERRORS = {
    "INVALID_PHONE": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞",
    "RATE_LIMIT": "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫. –ü–æ–¥–æ–∂–¥–∏ 1 –º–∏–Ω—É—Ç—É",
    "GATEWAY_ERROR": "–û—à–∏–±–∫–∞ SMS-—à–ª—é–∑–∞. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ",
    "INSUFFICIENT_BALANCE": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ SMS"
}
```

**KYC –æ—à–∏–±–∫–∏:**
```python
class KYCError(Exception):
    """–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ KYC"""
    
    def __init__(self, code: str, message: str, retry_allowed: bool):
        self.code = code
        self.message = message
        self.retry_allowed = retry_allowed

# –ö–æ–¥—ã –æ—à–∏–±–æ–∫
KYC_ERRORS = {
    "PROVIDER_TIMEOUT": ("–ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç", True),
    "INVALID_DOCUMENT": ("–î–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω", True),
    "VERIFICATION_FAILED": ("–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞", False),
    "BLACKLIST": ("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á—ë—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ", False)
}
```

### 8.4 –í—ã–ø–ª–∞—Ç—ã –°–ë–ü

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–∞–∑–æ–≤:**
```python
async def handle_payout_error(payout: SBPPayout, error: dict):
    """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É –≤—ã–ø–ª–∞—Ç—ã"""
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
    payout.status = "failed"
    payout.error_code = error["code"]
    payout.error_message = error["message"]
    payout.provider_response = error
    db.commit()
    
    # –£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await notify_user(
        payout.deal.user_id,
        "payout_failed",
        {
            "deal_id": payout.deal_id,
            "error": error["message"],
            "action": "–°–≤—è–∂–∏—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π"
        }
    )
    
    # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
    log_critical("payout_failed", {
        "payout_id": payout.payout_id,
        "deal_id": payout.deal_id,
        "error": error
    })
```

---

## 9. –ö–æ–ø–∏—Ä–∞–π—Ç –∏ UI-—Ç–µ–∫—Å—Ç—ã

### 9.1 –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- "–ª–æ–º–±–∞—Ä–¥"
- "–∑–∞–ª–æ–≥"
- "–∫—Ä–µ–¥–∏—Ç"
- "–º–∏–∫—Ä–æ–∑–∞–π–º"
- "–∑–∞–π–º"

‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- "–≤—ã–∫—É–ø —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤"
- "–ø—Ä–∞–≤–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∫—É–ø–∞"
- "—Å—Ä–æ–∫ –≤—ã–∫—É–ø–∞"
- "–æ–ø—Ü–∏–æ–Ω"

### 9.2 –ö–ª—é—á–µ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã

**–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:**
```
"–ú—ã –º–æ–∂–µ–º –ø—Ä–æ–¥–∞—Ç—å –Ω–∞ —Ä—ã–Ω–∫–µ –∑–∞ 2,800 ‚ÇΩ"
"–ú—ã –≤—ã–¥–∞–¥–∏–º —Ç–µ–±–µ 1,820 ‚ÇΩ —Å–µ–π—á–∞—Å"
"–ù–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç (–Ω–µ—Ç –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏)"
```

**–£—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–∫–∏:**
```
"–¢—ã –ø–æ–ª—É—á–∏—à—å —Å–µ–π—á–∞—Å 10,010 ‚ÇΩ"
"–í—ã–∫—É–ø–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –¥–æ 20.12.2025 –∑–∞ 12,512 ‚ÇΩ"
"–°—Ä–æ–∫ –≤—ã–∫—É–ø–∞: 14 –¥–Ω–µ–π"
```

**–†–∏—Å–∫–∏:**
```
‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:

‚Ä¢ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Steam/Valve
  –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–ª–∏ –∞–∫–∫–∞—É–Ω—Ç.
  –ú—ã –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º —ç—Ç–æ.

‚Ä¢ –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª
  Steam –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–µ–π–¥–∞ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.

‚Ä¢ –°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤
  –ú—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–∞–≤.

‚Ä¢ –ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∞–≤–∞ –≤—ã–∫—É–ø–∞
  –ü–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã –≤—ã–∫—É–ø–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –Ω–µ–ª—å–∑—è.
```

### 9.3 –°—Ç–∏–ª—å —Ç–µ–∫—Å—Ç–æ–≤
- –ö–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- –ë–µ–∑ –∫–∞–Ω—Ü–µ–ª—è—Ä–∏—Ç–∞
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
- –≠–º–æ–¥–∑–∏ –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–æ–≤ (—É–º–µ—Ä–µ–Ω–Ω–æ)

---

## 10. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—É–¥–∞

### 10.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–∫–∏


```python
# backend/models.py
class Deal(Base):
    __tablename__ = "deals"
    
    # –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey("users.id"))
    
    # –ü—Ä–µ–¥–º–µ—Ç—ã –∏ —Ü–µ–Ω—ã
    items_snapshot = Column(JSON)  # –ü–æ–ª–Ω—ã–π —Å–Ω–∏–º–æ–∫ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–¥–µ–ª–∫–∏
    market_total = Column(Float)
    loan_amount = Column(Float)
    buyback_price = Column(Float)
    
    # –°—Ä–æ–∫
    option_days = Column(Integer)  # 7-30
    option_expiry = Column(DateTime)
    
    # –°—Ç–∞—Ç—É—Å
    status = Column(Enum(DealStatus))
    
    # –ü–æ–¥–ø–∏—Å—å –∏ –¥–æ–≥–æ–≤–æ—Ä
    signature_id = Column(Integer, ForeignKey("deal_signatures.id"))
    contract_hash = Column(String)
    contract_pdf_url = Column(String)
    
    # –¢—Ä–µ–π–¥—ã
    initial_trade_id = Column(String)
    buyback_trade_id = Column(String)
    
    # –í—ã–ø–ª–∞—Ç—ã
    payout_id = Column(String)
    payout_status = Column(String)
    
    # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
    created_at = Column(DateTime)
    signed_at = Column(DateTime)
    activated_at = Column(DateTime)
    expired_at = Column(DateTime)
    buyback_at = Column(DateTime)
    
    # –°–≤—è–∑–∏
    signature = relationship("DealSignature")
    trades = relationship("SteamTrade")
    audit_logs = relationship("AuditLog")
```

### 10.2 –ü–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç –¥–ª—è —Å—É–¥–∞

**Endpoint –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏:**
```python
@app.get("/admin/deals/{deal_id}/legal-package")
async def get_legal_package(deal_id: int):
    """
    –í—ã–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª–Ω—ã–π –ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—É–¥–∞
    
    –¢—Ä–µ–±—É–µ—Ç admin-–ø—Ä–∞–≤–∞
    """
    deal = db.query(Deal).get(deal_id)
    
    package = {
        "deal": {
            "id": deal.id,
            "created_at": deal.created_at.isoformat(),
            "status": deal.status,
            "items": deal.items_snapshot,
            "amounts": {
                "market_total": deal.market_total,
                "loan_amount": deal.loan_amount,
                "buyback_price": deal.buyback_price
            },
            "term": {
                "days": deal.option_days,
                "expiry": deal.option_expiry.isoformat()
            }
        },
        "user": {
            "id": deal.user.id,
            "steam_id": deal.user.steam_id,
            "phone": deal.user.phone,
            "full_name": deal.user.full_name,
            "passport": {
                "series": deal.user.passport_series,
                "number": deal.user.passport_number,
                "issued_by": deal.user.passport_issued_by,
                "issue_date": deal.user.passport_issue_date
            }
        },
        "kyc": {
            "verification_id": deal.user.kyc_verification_id,
            "status": deal.user.kyc_status,
            "verified_at": deal.user.kyc_verified_at.isoformat()
        },
        "signature": {
            "timestamp": deal.signature.signature_timestamp.isoformat(),
            "ip_address": deal.signature.ip_address,
            "user_agent": deal.signature.user_agent,
            "phone": deal.signature.phone,
            "contract_hash": deal.signature.contract_hash,
            "contract_version": deal.signature.contract_version
        },
        "trades": [
            {
                "id": trade.id,
                "offer_id": trade.trade_offer_id,
                "status": trade.status,
                "created_at": trade.created_at.isoformat(),
                "completed_at": trade.completed_at.isoformat() if trade.completed_at else None
            }
            for trade in deal.trades
        ],
        "payout": {
            "id": deal.payout_id,
            "status": deal.payout_status,
            "amount": deal.loan_amount
        },
        "audit_logs": [
            {
                "action": log.action,
                "timestamp": log.timestamp.isoformat(),
                "ip": log.ip_address,
                "details": log.details
            }
            for log in deal.audit_logs
        ],
        "documents": {
            "contract_pdf": deal.contract_pdf_url
        }
    }
    
    # –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤
    archive_path = create_legal_archive(deal_id, package)
    
    return FileResponse(archive_path)
```

### 10.3 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:**
```python
def audit_log(action: str):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è"""
    def decorator(func):
        @wraps(func)
        async def wrapper(*args, **kwargs):
            # –ò–∑–≤–ª–µ—á—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
            request = kwargs.get("request")
            user_id = kwargs.get("user_id")
            deal_id = kwargs.get("deal_id")
            
            # –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
            result = await func(*args, **kwargs)
            
            # –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
            log = AuditLog(
                deal_id=deal_id,
                user_id=user_id,
                action=action,
                timestamp=datetime.now(),
                ip_address=request.client.host if request else None,
                user_agent=request.headers.get("user-agent") if request else None,
                details={
                    "args": str(args),
                    "kwargs": {k: v for k, v in kwargs.items() if k != "request"},
                    "result": str(result)
                }
            )
            db.add(log)
            db.commit()
            
            return result
        return wrapper
    return decorator

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
@audit_log("contract_signed")
async def sign_contract(deal_id: int, user_id: int, code: str, request: Request):
    # ...
    pass
```

---

## 11. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ)

```python
# backend/config.py
from pydantic_settings import BaseSettings

class ProductionSettings(BaseSettings):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production"""
    
    # === –¶–ï–ù–´ ===
    
    # –ü–æ—Ä–æ–≥–∏ –¥–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤—ã–¥–∞—á–∏
    LOAN_TIERS = [
        {"max": 500, "percent": 0.60},
        {"max": 5000, "percent": 0.65},
        {"max": float('inf'), "percent": 0.70}
    ]
    
    # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è –ø—Ä–∏—ë–º–∞
    MIN_INSTANT_PRICE = 20.0
    
    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç —Ü–µ–Ω (—á–∞—Å—ã)
    MAX_PRICE_AGE_HOURS = 1
    
    # === –°–†–û–ö–ò –í–´–ö–£–ü–ê ===
    
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ä–æ–∫–∞–º
    BUYBACK_TERMS = {
        7: {"interest": 0.10, "premium": 0.05},
        14: {"interest": 0.15, "premium": 0.07},
        21: {"interest": 0.20, "premium": 0.09},
        30: {"interest": 0.25, "premium": 0.10}
    }
    
    # –î–∏–∞–ø–∞–∑–æ–Ω —Å—Ä–æ–∫–æ–≤
    MIN_TERM_DAYS = 7
    MAX_TERM_DAYS = 30
    
    # === KYC ===
    
    # SMS
    SMS_CODE_LENGTH = 6
    SMS_CODE_TTL_SECONDS = 300  # 5 –º–∏–Ω—É—Ç
    SMS_RATE_LIMIT_SECONDS = 60  # 1 –º–∏–Ω—É—Ç–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏
    
    # –ü–∞—Å–ø–æ—Ä—Ç
    KYC_TIMEOUT_SECONDS = 300  # 5 –º–∏–Ω—É—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
    
    # === –¢–†–ï–ô–î–´ ===
    
    TRADE_TIMEOUT_HOURS = 48  # 2 –¥–Ω—è –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ
    
    # === –í–´–ü–õ–ê–¢–´ ===
    
    SBP_MIN_AMOUNT = 100.0
    SBP_MAX_AMOUNT = 600000.0
    
    # === –Æ–†–ò–î–ò–ß–ï–°–ö–û–ï ===
    
    CONTRACT_VERSION = "v1.0"
    TERMS_VERSION = "2025-12-01"
    
    # === –ò–ù–¢–ï–ì–†–ê–¶–ò–ò ===
    
    # Lis-Skins
    LIS_SKINS_API_URL: str = "https://lis-skins.ru/api"
    LIS_SKINS_API_KEY: str = ""
    
    # market.csgo
    MARKET_CSGO_API_URL: str = "https://market.csgo.com/api"
    MARKET_CSGO_API_KEY: str = ""
    
    # SMS
    SMS_PROVIDER: str = "sms.ru"  # –∏–ª–∏ "smsc.ru"
    SMS_API_KEY: str = ""
    
    # KYC
    KYC_PROVIDER: str = "sumsub"  # –∏–ª–∏ "fake" –¥–ª—è dev
    KYC_API_KEY: str = ""
    
    # –°–ë–ü
    SBP_PROVIDER: str = "modulbank"
    SBP_API_KEY: str = ""
    
    class Config:
        env_file = ".env"
        extra = "ignore"
```

---

## 12. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)

### –§–∞–∑–∞ 1: –¶–µ–Ω—ã –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å (1-2 –¥–Ω—è)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Lis-Skins API
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è market.csgo API
- [ ] –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (min 20‚ÇΩ, instant sell)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∫–∞—Ä—Ç–æ—á–µ–∫
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

### –§–∞–∑–∞ 2: –§–æ—Ä–º—É–ª—ã –∏ —Å—Ä–æ–∫–∏ (1 –¥–µ–Ω—å)
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –≤—ã–¥–∞—á–∏
- [ ] –°–ª–∞–π–¥–µ—Ä –≤—ã–±–æ—Ä–∞ —Å—Ä–æ–∫–∞ 7-30 –¥–Ω–µ–π
- [ ] –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –≤—ã–∫—É–ø–∞
- [ ] Live-–ø–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —É—Å–ª–æ–≤–∏–π —Å–¥–µ–ª–∫–∏

### –§–∞–∑–∞ 3: KYC (2-3 –¥–Ω—è)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SMS-—à–ª—é–∑–∞
- [ ] –§–ª–æ—É –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- [ ] –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –ø–∞—Å–ø–æ—Ä—Ç–∞
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è KYC-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- [ ] –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–µ–∑ KYC

### –§–∞–∑–∞ 4: –î–æ–≥–æ–≤–æ—Ä –∏ –ø–æ–¥–ø–∏—Å—å (2 –¥–Ω—è)
- [ ] –®–∞–±–ª–æ–Ω –¥–æ–≥–æ–≤–æ—Ä–∞
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
- [ ] –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ SMS
- [ ] –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
- [ ] –ú–æ–¥–µ–ª—å DealSignature

### –§–∞–∑–∞ 5: –í—ã–ø–ª–∞—Ç—ã (1-2 –¥–Ω—è)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –°–ë–ü-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- [ ] UI –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –≤—ã–ø–ª–∞—Ç—ã
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –≤—ã–ø–ª–∞—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] Webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –§–∞–∑–∞ 6: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å—É–¥–∞ (1 –¥–µ–Ω—å)
- [ ] –ú–æ–¥–µ–ª—å AuditLog
- [ ] –î–µ–∫–æ—Ä–∞—Ç–æ—Ä @audit_log
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- [ ] Endpoint –≤—ã–≥—Ä—É–∑–∫–∏ legal package
- [ ] –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –§–∞–∑–∞ 7: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (1 –¥–µ–Ω—å)
- [ ] Fallback –¥–ª—è API —Ü–µ–Ω
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Steam
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ SMS/KYC
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –°–ë–ü
- [ ] –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –§–∞–∑–∞ 8: –¢–µ–∫—Å—Ç—ã –∏ UI (1 –¥–µ–Ω—å)
- [ ] –ó–∞–º–µ–Ω–∞ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- [ ] –ë–ª–æ–∫ —Ä–∏—Å–∫–æ–≤
- [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤

### –§–∞–∑–∞ 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –¥–Ω—è)
- [ ] Unit-—Ç–µ—Å—Ç—ã –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] E2E —Ç–µ—Å—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ñ–ª–æ—É
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### –§–∞–∑–∞ 10: –î–µ–ø–ª–æ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (1 –¥–µ–Ω—å)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ production –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ (Sentry)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK/Loki)
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- [ ] –ë—ç–∫–∞–ø—ã –ë–î

---

## –ò—Ç–æ–≥–æ
**–û–±—â–µ–µ –≤—Ä–µ–º—è:** 13-18 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- API –∫–ª—é—á–∏ –æ—Ç Lis-Skins, market.csgo
- –î–æ—Å—Ç—É–ø –∫ SMS-—à–ª—é–∑—É
- –î–æ—Å—Ç—É–ø –∫ KYC-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—É
- –î–æ—Å—Ç—É–ø –∫ –°–ë–ü-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–æ–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å —Å:
- –†–µ–∞–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º KYC
- –ì–∏–±–∫–∏–º –≤—ã–±–æ—Ä–æ–º —Å—Ä–æ–∫–∞
- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ç—É—Ä–æ–º –¥–ª—è —Å—É–¥–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
