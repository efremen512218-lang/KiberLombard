# üéâ –ì–û–¢–û–í–û! –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Lis-Skins

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### 1. –°–µ—Ä–≤–∏—Å Lis-Skins API
**–§–∞–π–ª:** `backend/services/lisskins_service.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- `get_item_price()` - –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –ø—Ä–µ–¥–º–µ—Ç–∞
- `get_prices_batch()` - –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- `get_market_info()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Ä–∫–µ—Ç–µ

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `buy_price` - –ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É (highest buy order)
- `sell_price` - —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (lowest sell order)

---

### 2. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∑–∞–ª–æ–≥–∞

#### –ë—ã–ª–æ:
```
–ó–∞–ª–æ–≥ = 65% –æ—Ç —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω—ã (Steam Market)
```

#### –°—Ç–∞–ª–æ:
```
–ó–∞–ª–æ–≥ = 40% –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–∫—É–ø–∫—É (Lis-Skins buy_price)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ª—É—á—à–µ:**
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É = —Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞, –∫–æ—Ç–æ—Ä—É—é –≥–æ—Ç–æ–≤—ã –ø–ª–∞—Ç–∏—Ç—å
- 40% = –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ª–æ–≥ —Å —Ö–æ—Ä–æ—à–µ–π –º–∞—Ä–∂–æ–π
- –ï—Å–ª–∏ –Ω–µ—Ç —Ü–µ–Ω—ã Lis-Skins ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Steam Market –∫–∞–∫ fallback

---

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π pricing service
**–§–∞–π–ª:** `backend/services/pricing_service.py`

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
```python
# –ó–∞–ª–æ–≥ = 40% –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–∫—É–ø–∫—É
loan_amount = lisskins_buy_total * 0.40

# –í—ã–∫—É–ø = —Ä—ã–Ω–æ—á–Ω–∞—è * 1.15 + –ø—Ä–µ–º–∏—è –æ–ø—Ü–∏–æ–Ω–∞ 25%
buyback_price = market_total * 1.15 + loan_amount * 0.25
```

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ API endpoints

#### GET /api/inventory/{steam_id}
–¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "steam_id": "...",
  "items": [
    {
      "assetid": "...",
      "name": "AK-47 | Redline",
      "market_price": 3500,           // Steam Market
      "lisskins_buy_price": 3200,     // Lis-Skins buy
      "lisskins_sell_price": 3800     // Lis-Skins sell
    }
  ],
  "total_value": 150000,              // –°—É–º–º–∞ Steam Market
  "lisskins_buy_total": 140000        // –°—É–º–º–∞ Lis-Skins buy
}
```

#### POST /api/quote
–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–ª–æ–≥ –æ—Ç Lis-Skins —Ü–µ–Ω:
```json
{
  "market_total": 150000,             // Steam Market
  "lisskins_buy_total": 140000,       // Lis-Skins buy
  "loan_amount": 56000,               // 40% –æ—Ç lisskins_buy_total
  "buyback_price": 186500,            // market * 1.15 + premium
  "breakdown": {
    "loan_percentage": "40%"
  }
}
```

---

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Frontend

#### –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ]       ‚îÇ
‚îÇ AK-47 | Redline     ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ Steam:    3,500 ‚ÇΩ   ‚îÇ
‚îÇ Lis-Skins: 3,200 ‚ÇΩ  ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ –ó–∞–ª–æ–≥ (40%): 1,280‚ÇΩ ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ [Classified]        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—ã–±—Ä–∞–Ω–æ: 5 —à—Ç                                            ‚îÇ
‚îÇ Steam Market: 15,000 ‚ÇΩ                                   ‚îÇ
‚îÇ Lis-Skins (buy): 14,000 ‚ÇΩ                                ‚îÇ
‚îÇ üí∞ –ó–∞–ª–æ–≥ (40%): 5,600 ‚ÇΩ                                  ‚îÇ
‚îÇ üîÑ –í—ã–∫—É–ø: 18,650 ‚ÇΩ                                       ‚îÇ
‚îÇ                                    [–°–±—Ä–æ—Å–∏—Ç—å] [–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:

### –ü—Ä–µ–¥–º–µ—Ç: AK-47 | Redline

**–¶–µ–Ω—ã:**
- Steam Market: 3,500 ‚ÇΩ
- Lis-Skins buy: 3,200 ‚ÇΩ (–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É)
- Lis-Skins sell: 3,800 ‚ÇΩ

**–†–∞—Å—á–µ—Ç –∑–∞–ª–æ–≥–∞:**
```
–ó–∞–ª–æ–≥ = 3,200 ‚ÇΩ √ó 40% = 1,280 ‚ÇΩ
```

**–†–∞—Å—á–µ—Ç –≤—ã–∫—É–ø–∞:**
```
–ë–∞–∑–∞ –≤—ã–∫—É–ø–∞ = 3,500 ‚ÇΩ √ó 1.15 = 4,025 ‚ÇΩ
–ü—Ä–µ–º–∏—è –æ–ø—Ü–∏–æ–Ω–∞ = 1,280 ‚ÇΩ √ó 25% = 320 ‚ÇΩ
–í—ã–∫—É–ø = 4,025 ‚ÇΩ + 320 ‚ÇΩ = 4,345 ‚ÇΩ
```

**–ü—Ä–∏–±—ã–ª—å —Å–µ—Ä–≤–∏—Å–∞:**
- –ï—Å–ª–∏ –≤—ã–∫—É–ø–∏—Ç: 4,345 ‚ÇΩ - 1,280 ‚ÇΩ = 3,065 ‚ÇΩ (239% ROI)
- –ï—Å–ª–∏ –Ω–µ –≤—ã–∫—É–ø–∏—Ç: 3,200 ‚ÇΩ - 1,280 ‚ÇΩ = 1,920 ‚ÇΩ + –ø—Ä–µ–¥–º–µ—Ç

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### 1. –û—Ç–∫—Ä–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
```
http://localhost:3000/cabinet/inventory
```

### 2. –ó–∞–≥—Ä—É–∑–∏ —Å–≤–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
```
üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
‚Üí –í—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É
‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å
```

### 3. –£–≤–∏–¥–∏—à—å –æ–±–µ —Ü–µ–Ω—ã
- Steam Market (—Å–µ—Ä–∞—è)
- Lis-Skins buy (–∑–µ–ª–µ–Ω–∞—è)
- –ó–∞–ª–æ–≥ 40% (—Å–∏–Ω—è—è)

### 4. –í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç—ã
–ö–ª–∏–∫–∞–π –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏

### 5. –°–º–æ—Ç—Ä–∏ —Ä–∞—Å—á–µ—Ç –≤–Ω–∏–∑—É
- –°—É–º–º–∞ Lis-Skins buy
- –ó–∞–ª–æ–≥ (40%)
- –í—ã–∫—É–ø

### 6. –°–æ–∑–¥–∞–π —Å–¥–µ–ª–∫—É
–ù–∞–∂–º–∏ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

### Rate Limiting
Lis-Skins API –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ 0.5 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ü–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–ø-10 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
- –î–ª—è quote –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ü–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### Fallback
–ï—Å–ª–∏ Lis-Skins API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Steam Market —Ü–µ–Ω–∞
- –ó–∞–ª–æ–≥ = 40% –æ—Ç Steam Market

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω (Redis):
- –ö–µ—à –Ω–∞ 5-10 –º–∏–Ω—É—Ç
- –£–º–µ–Ω—å—à–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API
- –£—Å–∫–æ—Ä–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### Backend:
1. ‚úÖ `backend/services/lisskins_service.py` (–Ω–æ–≤—ã–π)
2. ‚úÖ `backend/services/pricing_service.py` (–æ–±–Ω–æ–≤–ª–µ–Ω)
3. ‚úÖ `backend/schemas.py` (–¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è)
4. ‚úÖ `backend/main.py` (–æ–±–Ω–æ–≤–ª–µ–Ω—ã endpoints)

### Frontend:
1. ‚úÖ `frontend/src/app/cabinet/inventory/page.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –¢–µ—Å—Ç 1: API inventory
```bash
curl http://localhost:8000/api/inventory/76561198306528518
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```json
{
  "items": [
    {
      "market_price": 3500,
      "lisskins_buy_price": 3200,
      "lisskins_sell_price": 3800
    }
  ]
}
```

### –¢–µ—Å—Ç 2: Frontend
1. –û—Ç–∫—Ä–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
2. –ó–∞–≥—Ä—É–∑–∏ –ø—Ä–µ–¥–º–µ—Ç—ã
3. –£–≤–∏–¥–∏—à—å –æ–±–µ —Ü–µ–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
4. –í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç—ã
5. –í–Ω–∏–∑—É —É–≤–∏–¥–∏—à—å —Ä–∞—Å—á–µ—Ç —Å Lis-Skins —Ü–µ–Ω–∞–º–∏

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏:

### 1. –ë–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ü–µ–Ω—ã
–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É = —Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ —Ä—ã–Ω–∫–∞

### 2. –õ—É—á—à–∞—è –º–∞—Ä–∂–∞
40% –∑–∞–ª–æ–≥ + –≤—ã–∫—É–ø 115% = –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–∏–±—ã–ª—å

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–î–∞–∂–µ –µ—Å–ª–∏ —Ü–µ–Ω–∞ —É–ø–∞–¥–µ—Ç, –∑–∞–ª–æ–≥ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ä–∏—Å–∫–∏

### 4. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
–ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –æ–±–µ —Ü–µ–Ω—ã –∏ –ø–æ–Ω–∏–º–∞–µ—Ç —Ä–∞—Å—á–µ—Ç

---

## üéâ –ì–æ—Ç–æ–≤–æ!

**Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π!**

**–û–±–Ω–æ–≤–∏ –±—Ä–∞—É–∑–µ—Ä (F5) –∏ –∑–∞–≥—Ä—É–∑–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å!**

**–£–≤–∏–¥–∏—à—å:**
- ‚úÖ –¶–µ–Ω—ã Steam Market
- ‚úÖ –¶–µ–Ω—ã Lis-Skins (buy/sell)
- ‚úÖ –ó–∞–ª–æ–≥ 40% –æ—Ç Lis-Skins buy
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—ã–∫—É–ø–∞

---

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! üöÄ**
