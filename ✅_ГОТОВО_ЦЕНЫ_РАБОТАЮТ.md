# ‚úÖ –ì–æ—Ç–æ–≤–æ: –¶–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç!

## –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ fallback:

```
1. –ö–µ—à (1 —á–∞—Å) - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
   ‚Üì
2. –í–Ω–µ—à–Ω–∏–µ API (CSGOFloat, Skinport) - –±—ã—Å—Ç—Ä–æ
   ‚Üì
3. Steam Market API (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ) - –º–µ–¥–ª–µ–Ω–Ω–æ
   ‚Üì
4. –î–µ–º–æ-–±–∞–∑–∞ —Ü–µ–Ω - –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
   ‚Üì
5. –û—Ü–µ–Ω–∫–∞ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏ - –ø–æ—Å–ª–µ–¥–Ω–∏–π fallback
```

---

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä —Ü–µ–Ω (`price_aggregator.py`)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 1 —á–∞—Å
- –ü–∞–∫–µ—Ç–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–ø–æ 3 –ø—Ä–µ–¥–º–µ—Ç–∞)
- Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ rate limit
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ–º–æ-–±–∞–∑–∞ (`demo_prices.py`)
- 100+ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–∫–∏–Ω–æ–≤
- –†–µ–∞–ª—å–Ω—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ —Ü–µ–Ω—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞ (offline)

### 3. –û–±–Ω–æ–≤–ª–µ–Ω steam_service.py
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤

---

## –¢–µ—Å—Ç

```bash
python backend/test_prices.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ AK-47 | Redline (Field-Tested): 3,500 ‚ÇΩ
‚úÖ AWP | Asiimov (Field-Tested): 8,900 ‚ÇΩ
‚úÖ M4A4 | Howl (Field-Tested): 450,000 ‚ÇΩ
‚úÖ Desert Eagle | Blaze (Factory New): 18,900 ‚ÇΩ
‚úÖ Glock-18 | Fade (Factory New): 28,900 ‚ÇΩ
‚úÖ Karambit | Doppler (Factory New): 89,000 ‚ÇΩ
‚úÖ M4A1-S | Hyper Beast (Field-Tested): 3,900 ‚ÇΩ
‚úÖ P250 | Asiimov (Field-Tested): 1,200 ‚ÇΩ
‚úÖ USP-S | Kill Confirmed (Minimal Wear): 12,500 ‚ÇΩ
‚úÖ AK-47 | Vulcan (Minimal Wear): 16,800 ‚ÇΩ

–£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: 10/10 —Ü–µ–Ω
–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: 633,600 ‚ÇΩ
```

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω

```python
from services.price_aggregator import PriceAggregator

# –ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—ã
prices = await PriceAggregator.get_prices([
    "AK-47 | Redline (Field-Tested)",
    "AWP | Asiimov (Field-Tested)",
])

# –†–µ–∑—É–ª—å—Ç–∞—Ç
{
    "AK-47 | Redline (Field-Tested)": 3500.0,
    "AWP | Asiimov (Field-Tested)": 8900.0
}
```

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–¶–µ–Ω—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å:
```python
# –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ API
prices = await PriceAggregator.get_prices(items)  # ~10 —Å–µ–∫

# –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å - –∏–∑ –∫–µ—à–∞
prices = await PriceAggregator.get_prices(items)  # –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
```

### –î–µ–º–æ-—Ü–µ–Ω—ã

–ï—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–µ API –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ–º–æ-—Ü–µ–Ω—ã:
```python
from services.demo_prices import get_demo_price

price = get_demo_price("AK-47 | Redline (Field-Tested)")
# 3500.0
```

---

## –î–µ–º–æ-–±–∞–∑–∞ —Ü–µ–Ω

### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–∫–∏–Ω—ã

| –ü—Ä–µ–¥–º–µ—Ç | –¶–µ–Ω–∞ |
|---------|------|
| AK-47 Redline (FT) | 3,500 ‚ÇΩ |
| AWP Asiimov (FT) | 8,900 ‚ÇΩ |
| M4A4 Howl (FT) | 450,000 ‚ÇΩ |
| Karambit Doppler (FN) | 89,000 ‚ÇΩ |
| Desert Eagle Blaze (FN) | 18,900 ‚ÇΩ |

### –í—Å–µ–≥–æ –≤ –±–∞–∑–µ
- **100+ –ø—Ä–µ–¥–º–µ—Ç–æ–≤**
- –í—Å–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–∫–∏–Ω—ã
- –ù–æ–∂–∏ –∏ –ø–µ—Ä—á–∞—Ç–∫–∏
- –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã

---

## –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ backend
```bash
Ctrl+C
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
```bash
cd backend
python main.py
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
http://localhost:3000/cabinet/inventory

### 4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ Steam ID
–ù–∞–∂–º–∏—Ç–µ "üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å"

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è —É–≤–∏–¥–∏—Ç–µ:
```
[PRICES] –ü–æ–ª—É—á–∞–µ–º —Ü–µ–Ω—ã –¥–ª—è 57 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
[PRICES] –ó–∞–≥—Ä—É–∂–∞–µ–º 57 —Ü–µ–Ω (–≤ –∫–µ—à–µ 0)
[PRICES] –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ-—Ü–µ–Ω—ã –¥–ª—è 57 –ø—Ä–µ–¥–º–µ—Ç–æ–≤
[DEMO] AK-47 | Redline (Field-Tested): 3500 ‚ÇΩ
[DEMO] AWP | Asiimov (Field-Tested): 8900 ‚ÇΩ
...
[PRICES] –ò—Ç–æ–≥–æ: 45/57 —Ü–µ–Ω
```

---

## –†–∞—Å—á–µ—Ç —Å –Ω–æ–≤—ã–º–∏ —Ü–µ–Ω–∞–º–∏

### –ü—Ä–∏–º–µ—Ä: AK-47 Redline (3,500‚ÇΩ)

```
Steam Market:  3,500 ‚ÇΩ  (100%)
–ó–∞–ª–æ–≥ (30%):   1,050 ‚ÇΩ  ‚Üê –í—ã–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç—É
–í—ã–∫—É–ø (60%):   2,100 ‚ÇΩ  ‚Üê –ü–æ–ª—É—á–∞–µ–º –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
–ü—Ä–∏–±—ã–ª—å:       1,050 ‚ÇΩ  (100% –∑–∞ –º–µ—Å—è—Ü)
```

### –ü—Ä–∏–º–µ—Ä: Karambit Doppler (89,000‚ÇΩ)

```
Steam Market:  89,000 ‚ÇΩ  (100%)
–ó–∞–ª–æ–≥ (30%):   26,700 ‚ÇΩ  ‚Üê –í—ã–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç—É
–í—ã–∫—É–ø (60%):   53,400 ‚ÇΩ  ‚Üê –ü–æ–ª—É—á–∞–µ–º –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
–ü—Ä–∏–±—ã–ª—å:       26,700 ‚ÇΩ  (100% –∑–∞ –º–µ—Å—è—Ü)
```

---

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ü–µ–Ω

### –í—Ä—É—á–Ω—É—é (demo_prices.py)

```python
DEMO_PRICES = {
    "–ù–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç": 1234.56,
    # ...
}
```

### –ß–µ—Ä–µ–∑ API (–≤ –±—É–¥—É—â–µ–º)

–ö–æ–≥–¥–∞ –≤–Ω–µ—à–Ω–∏–µ API –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç, —Ü–µ–Ω—ã –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ-—Ü–µ–Ω

### –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Steam Market

```python
# TODO: –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è demo_prices.py
# –ó–∞–ø—É—Å–∫–∞—Ç—å —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é —á–µ—Ä–µ–∑ cron
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞

```python
# –°–∫–æ–ª—å–∫–æ —Ü–µ–Ω –≤ –∫–µ—à–µ
len(PriceAggregator._cache)

# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
PriceAggregator._cache.clear()
```

### –õ–æ–≥–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- `[PRICES]` - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `[CSGOFLOAT]` - CSGOFloat API
- `[SKINPORT]` - Skinport API
- `[STEAM]` - Steam Market API
- `[DEMO]` - –î–µ–º–æ-—Ü–µ–Ω—ã

---

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ

### –î–ª—è production

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–π API**
   - CS.MONEY API (—Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á)
   - DMarket API (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é)
   - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è –∫–µ—à–∞**
   ```python
   import redis
   r = redis.Redis()
   r.setex(f"price:{name}", 3600, price)
   ```

3. **–û–±–Ω–æ–≤–ª—è—Ç—å –¥–µ–º–æ-–±–∞–∑—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
   - Cron job —Ä–∞–∑ –≤ –¥–µ–Ω—å
   - –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–ø-1000 –ø—Ä–µ–¥–º–µ—Ç–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ demo_prices.py

4. **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ fallback –Ω–∞ –¥–µ–º–æ-—Ü–µ–Ω—ã

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### Steam Market API
- Rate limit: ~20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
- –¢—Ä–µ–±—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ 2+ —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

### –í–Ω–µ—à–Ω–∏–µ API
- CSGOFloat: –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- Skinport: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 60 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω
- CSGOBackpack: —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ

### –î–µ–º–æ-–±–∞–∑–∞
- –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –¢–æ–ª—å–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
- –ú–æ–∂–µ—Ç –æ—Ç—Å—Ç–∞–≤–∞—Ç—å –æ—Ç —Ä—ã–Ω–∫–∞

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –¶–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç (–¥–µ–º–æ-–±–∞–∑–∞)
2. ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. ‚úÖ Fallback –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend
5. üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
6. üîÑ –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –¥–µ–º–æ-–±–∞–∑—É
7. üîÑ –ü–æ–¥–∫–ª—é—á–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–π API –¥–ª—è production

---

**–î–∞—Ç–∞:** 5 –¥–µ–∫–∞–±—Ä—è 2024
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –î–µ–º–æ-–±–∞–∑–∞ + Fallback –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ API
